# Первые шаги — Open Property Core

Пошаговый план, чтобы из «пустого репозитория» выйти к первому рабочему каркасу за 2–4 недели.

---

## Фаза 0: Юридическая и организационная база (1–3 дня)

### 1. Репозиторий и видимость

- [ ] Создать Git-репозиторий (GitHub/GitLab).
- [ ] Добавить описание и теги: `property-management`, `proptech`, `open-core`, `bsl`, `self-hosted`.
- [ ] Решить: публичный с первого дня или приватный до первого релиза (рекомендация: публичный — быстрее доверие и контрибьюторы).

### 2. Лицензия

- [ ] Положить в корень файл `LICENSE` с текстом BSL (см. [docs/LICENSE.md](LICENSE.md)).
- [ ] В README явно указать: «Community бесплатно при выручке < $100K/год».
- [ ] Опционально: зафиксировать дату конвертации BSL → Apache 2.0 (например, «4 года с даты первого публичного релиза»).

### 3. CLA (Contributor License Agreement)

- [ ] Выбрать шаблон CLA (например, Harmony CLA или аналог).
- [ ] Положить в репозиторий `CLA.md` или `docs/CLA.md` с текстом и инструкцией «подписать до первого merge».
- [ ] Настроить проверку (bot или manual): PR без подписанного CLA не мержить.

Без CLA вы не сможете безопасно перелицензировать код в Enterprise.

---

## Фаза 1: Каркас продукта (1–2 недели)

### 4. Выбор стека и репозиторная структура

- [ ] Зафиксировать в `docs/ARCHITECTURE.md` (и при необходимости в ADR) выбор бэкенда:
  - **Django** — быстрее MVP за счёт Django Admin и DRF; удобно для отчётности и интеграций (1С, Python-экосистема).
  - **NestJS** — единый TypeScript-стек с фронтом, кастомная админка с нуля.
  - Фронт: при Django — админка встроена или отдельный SPA; при NestJS — React/Vue + UI-библиотека.
  - БД: PostgreSQL. Очереди: Celery (Django) или Bull/BullMQ (NestJS).
- [ ] Создать монорепозиторий или раздельные репозитории:
  - `apps/api` — REST/GraphQL API.
  - `apps/admin` — админка.
  - `apps/tenant-portal` (опционально) — портал арендатора.
  - `packages/shared` — общие типы, константы, утилиты.

### 5. Минимальный API и БД

- [ ] Поднять проект (например `nest new`, или шаблон с Docker).
- [ ] Добавить Docker/docker-compose: API + PostgreSQL (и при необходимости Redis для очередей).
- [ ] Описать и внедрить первые сущности домена:
  - **Property** (объект недвижимости): id, name, address, type, status.
  - **Unit** (помещение/квартира в объекте): id, property_id, name, area, status.
  - **Party** (контрагент: арендатор/арендодатель): id, name, type, contacts.
  - **Contract** (договор): id, unit_id, party_id, dates, amount, status.
- [ ] Миграции (TypeORM/Prisma/Drizzle — на выбор), без «тяжёлой» бизнес-логики, только схема.

### 6. Первый сценарий «от начала до конца»

- [ ] Реализовать сценарий: создание объекта → создание помещения → создание контрагента → создание договора (CRUD через API).
- [ ] Покрыть тестами (unit + хотя бы один e2e на этот сценарий).
- [ ] Задокументировать в README или `docs/GETTING_STARTED.md`: как поднять окружение и выполнить сценарий через curl/Postman.

Цель: любой разработчик может склонировать репозиторий и за 15 минут увидеть работающий поток.

---

## Фаза 2: Документация и упаковка (3–5 дней)

### 7. Публичная документация

- [ ] `docs/ARCHITECTURE.md` — модули, границы, ключевые решения (уже начат выше).
- [ ] `docs/ROADMAP.md` — что в Community, что планируется в Enterprise, по фазам.
- [ ] `docs/API.md` или OpenAPI/Swagger — описание эндпоинтов (можно генерировать из кода).
- [ ] `CONTRIBUTING.md` — как форкать, ветки, код-ревью, CLA (см. [docs/CONTRIBUTING.md](CONTRIBUTING.md)).

### 8. Релиз «нулевой» версии

- [ ] Версионирование: семантический версионинг (SemVer), тег в Git (например `v0.1.0`).
- [ ] Changelog: `CHANGELOG.md` с секцией для v0.1.0 («Initial skeleton: properties, units, contracts»).
- [ ] Сборка и запуск одной командой: `docker-compose up` или `make up` — без ручных шагов для базового сценария.

---

## Чек-лист «первый коммит»

Перед тем как считать «первые шаги» выполненными:

| # | Действие | Готово |
|---|----------|--------|
| 1 | Репозиторий создан, README и docs на месте | ☐ |
| 2 | LICENSE (BSL) и порог $100K зафиксированы | ☐ |
| 3 | CLA выбран и добавлен в репо | ☐ |
| 4 | Стек зафиксирован в ARCHITECTURE.md | ☐ |
| 5 | Каркас API + БД (properties, units, contracts) | ☐ |
| 6 | Один сквозной сценарий работает и описан | ☐ |
| 7 | Docker/docker-compose поднимает проект | ☐ |
| 8 | ROADMAP и CONTRIBUTING заполнены | ☐ |

---

## Что делать после первых шагов

- Начать привлекать первых пользователей/контрибьюторов (сообщества, чаты proptech).
- Собрать 2–3 кейса внедрения «на себе» или пилотных клиентах.
- Ввести Enterprise-фичи только после стабилизации Community (см. [ROADMAP.md](ROADMAP.md)).

Дальше — [Архитектура](ARCHITECTURE.md) и [Дорожная карта](ROADMAP.md).
